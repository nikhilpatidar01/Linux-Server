# Binding with IP Address in Apache 

Apache can bind to specific IP addresses and ports, allowing you to host multiple websites on the same server using Virtual Hosts. This guide covers how to configure Apache to bind to specific IP addresses and set up virtual hosts for multiple websites.

# 1. Types of Apache Binding 
## Apache can be configured to bind to:

### A specific IP Address
### All abailable IP Address
### Multiple Ports
---
# 1.1 Binding to All Available IP Addresses
## By Default, Apache listens on all available IP Address:

```
Listen 80
```
### Apache will listen on port *80* on all available network interfaces.
### Example output from *netstat*:

```
netstat -nltup | grep httpd
```
## Output

```
tcp      0         0.0.0.0:80      0.0.0.0:*      LISTEN      1234/httpd
```
### *0.0.0.0* Indicated that Apache is listening on all available IP Address.

---
# 1.2 Binding to a SPecific IP Address
## To Bind Apache to a specific IP Address
## 1. Open the Apache Configuration file:

```
nano /etc/httpd/conf/httpd.conf
```
## 2. Modify the *Listen* directive:
```
Listen 127.0.0.0.1:80 
```
### This restricts Apache to only listen on *127.0.0.1* (localhost).
### Example output from *netstat*.

```
netstat -nltup | grep httpd
```
## Output

```
tcp      0      0  127.0.0.1:80      0.0.0.0:*      LISTEN      1234/httpd
```
# 1.3 Binding to a LAN IP Address
## To Bind Apache to a LAN IP Address *(192.168.112.145)*
## 1. Open the Apache COnfiguration file:

```
nano /etc/httpd/conf/httpd.conf
```

## 2. Modify the *Listen* directive.

```
Listen 192.168.112.145:80 
```
### This allows Apache to listen only on the LAN IP *192.168.112.145*.
### Example Output from *netstat*.

```
netstat -nltup | grep httpd
```
## Output
```
tcp      0      0  192.168.112.145:80      0.0.0.0:*      LISTEN      1234/httpd
```
---

# 1.4 Binding to Multiple Ports
## Apache can also listen on multiple ports simultaneously.
## 1. Open the Apache COnfiguration file:

```
nano /etc/httpd/conf/httpd.conf
```

## 2. Add multiple *Listen* directives.

```
Listen 80
Listen 81
Listen 82
```
### Apache will listen on ports *80*, *81* and *82*.
### Example Output from *netstat*.

```
netstat -nltup | grep httpd
```
## Output
```
tcp      0      0  0.0.0.0:80      0.0.0.0:*      LISTEN      1234/httpd
tcp      0      0  0.0.0.0:81      0.0.0.0:*      LISTEN      1234/httpd
tcp      0      0  0.0.0.0:82      0.0.0.0:*      LISTEN      1234/httpd
```


## 1. Create Website Directories

1. Navigate to the document root:
   ```bash
   cd /var/www/html/
   ```

2. Create directories for each website:
   ```bash
   mkdir site1 site2 site3
   ```

3. Set permissions:
   ```bash
   chown -Rv apache:apache site1 site2 site3
   ```

## 2. Modify Apache Configuration

Open the main Apache configuration file:
```bash
vim /etc/httpd/conf/httpd.conf
```

Add multiple Virtual Host entries:
```apache
<VirtualHost 192.168.1.30:80>
    DocumentRoot /var/www/html/site1/
    DirectoryIndex index.html
</VirtualHost>

<VirtualHost 192.168.1.31:80>
    DocumentRoot /var/www/html/site2/
    DirectoryIndex index.html
</VirtualHost>

<VirtualHost 192.168.1.32:80>
    DocumentRoot /var/www/html/site3/
    DirectoryIndex index.html
</VirtualHost>
```

## 3. Create Virtual Host Files

Create individual virtual host configuration files under `/etc/httpd/conf.d/`.

### 3.1. Single IP Binding

Bind Apache to a specific IP address (`192.168.1.30`) for a single site:
```bash
vim /etc/httpd/conf.d/site1.conf
```
Example:
```apache
<VirtualHost 192.168.1.30:80>
    DocumentRoot /var/www/html/site1/
    DirectoryIndex index.html
</VirtualHost>
```

### 3.2. Multiple IP Bindings

#### site2.conf
```bash
vim /etc/httpd/conf.d/site2.conf
```
Example:
```apache
<VirtualHost 192.168.1.31:80>
    DocumentRoot /var/www/html/site2/
    DirectoryIndex index.html
</VirtualHost>
```

#### site3.conf
```bash
vim /etc/httpd/conf.d/site3.conf
```
Example:
```apache
<VirtualHost 192.168.1.32:80>
    DocumentRoot /var/www/html/site3/
    DirectoryIndex index.html
</VirtualHost>
```

### 3.3. Binding to All IP Addresses

If you want Apache to listen on all available IP addresses:
```bash
nano /etc/httpd/conf.d/site1.conf
```
Example:
```apache
<VirtualHost *:80>
    DocumentRoot /var/www/html/site1/
    DirectoryIndex index.html
</VirtualHost>
```

## 4. Validate Configuration

Check if the Apache configuration is valid:
```bash
httpd -t
```
Example output:
```
Syntax OK
```

## 5. Restart Apache

Apply the changes by restarting the Apache service:
```bash
systemctl restart httpd.service
```

## 6. Test the Configuration

Use `netstat` to confirm Apache is listening on the correct ports:
```bash
netstat -nltup | grep httpd
```

## Summary

| Type of Binding       | Example Configuration              | Use Case                                  |
|-----------------------|----------------------------------|-------------------------------------------|
| Bind to All IPs       | `<VirtualHost *:80>`             | Use when you want Apache to listen on all interfaces |
| Bind to Specific IP   | `<VirtualHost 192.168.1.30:80>`  | Use to host multiple sites on different IPs |
| Bind to Multiple IPs  | Multiple `<VirtualHost>` blocks | Use to configure several virtual hosts |

This setup ensures proper virtual hosting using Apache with specific IP bindings.


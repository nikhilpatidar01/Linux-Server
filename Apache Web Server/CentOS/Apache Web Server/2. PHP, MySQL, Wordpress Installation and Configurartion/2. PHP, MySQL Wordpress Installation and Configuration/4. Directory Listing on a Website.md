## **What is Directory Listing on a Website?**  
Directory Listing on a website occurs when a web server **does not have an index file** (such as `index.html` or `index.php`) in a directory, allowing users to view all files and folders in that directory. This can unintentionally expose **sensitive information** to attackers.  

---

## **How Does Directory Listing Work?**  
When a user visits a website URL like:  
```
https://example.com/uploads/
```
- If an `index.html` or `index.php` file is present → The webpage loads normally.  
- If no index file exists → The web server **displays a list** of all files and directories instead.  

### **Example of Directory Listing Page**
```
Index of /uploads
--------------------------------
Parent Directory       02-Apr-2025  10:30 -
image1.jpg            02-Apr-2025  10:30  123KB
database_backup.sql   02-Apr-2025  10:30  2.5MB
.htaccess             02-Apr-2025  10:30  1KB
--------------------------------
```
This means an attacker can **directly access and download files**, which can be a major security risk.

---

# Directory Listing Guide

## Change Directory and Create an Empty File
```apache
cd /var/www/html/wordpress/wp-content/uploads/2024/03
```
Create Empty file index.php
```apache
touch index.php
```
## "View the Directory using the Browser
type Search Box
```apache
https://192.168.129.146/wp-content/uploads/
```


## Disable Directory Listing for All Directories in Apache

### 1. Edit the Apache configuration file:
```apache
nano /etc/httpd/conf/httpd.conf
```
Add data 
```apache
  <Directory /var/www/html/wordpress >
        Options -Indexes
    </Directory>
```

#### Configuration: `httpd.conf` add data on last line:
```apache
<VirtualHost 192.168.129.146:80>
    SSLEngine on
    SSLCertificateFile /etc/pki/tls/certs/localhost.crt
    SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
    ServerName nikhil.local
    DocumentRoot /var/www/html/wordpress
    DirectoryIndex index.php
    ServerAlias www.nikhil.local
    <Directory /var/www/html/wordpress >
        Options -Indexes
    </Directory>
</VirtualHost>
```

Main File Configuration Data

```apache
IncludeOptional conf.d/*.conf

<VirtualHost 192.168.129.146:443>
    SSLEngine on
    SSLCertificateFile /etc/pki/tls/certs/localhost.crt
    SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
    ServerName nikhil.local
    DocumentRoot /var/www/html/wordpress
    DirectoryIndex index.php
    ServerAlias www.nikhil.local
    <Directory /var/www/html/wordpress >
        Options -Indexes
    </Directory>
</VirtualHost>

<VirtualHost 192.168.129.146:80>
    SSLEngine on
    SSLCertificateFile /etc/pki/tls/certs/localhost.crt
    SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
    ServerName nikhil.local
    DocumentRoot /var/www/html/wordpress
    DirectoryIndex index.php
    ServerAlias www.nikhil.local
    <Directory /var/www/html/wordpress >
        Options -Indexes
    </Directory>
</VirtualHost>

```

### Restart the Apache service:
```apache
systemctl restart httpd.service
```

### 2. Enable Directory Listing for a Selected Directory
1. Create a new Directory.
```apache
mkdir /var/www/html/wordpress/backup
```
2. Change Ownership.
```apache
chown -R apache:apache /var/www/html/wordpress/backup
```
3. Edit the Apache Configuration.
```apache
nano /etc/httpd/conf/httpd.conf
```
```apache
<VirtualHost 192.168.129.146:443>
    SSLEngine on
    SSLCertificateFile /etc/pki/tls/certs/localhost.crt
    SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
    DocumentRoot /var/www/html/wordpress  
    DirectoryIndex index.php
    <Directory /var/www/html/wordpress/backup >
    Options Indexes
    </Directory>
    <Directory /var/www/html/wordpress >
    Options -Indexes
    </Directory>
</VirtualHost>
```
4. Restart Apache.
 ```apaches
systemctl restart httpd.service
```

### Allow Selected IP Addresses
1. Edit Apache configuration.
```apache
nano /etc/httpd/conf/httpd.conf
```
Add Data.
```apache
       Order allow,deny
    Allow from 192.168.129.150 192.168.129.170 
```

Main File Configuration.
```apache
<VirtualHost 192.168.129.146:443>
    SSLEngine on
    SSLCertificateFile /etc/pki/tls/certs/localhost.crt
    SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
    DocumentRoot /var/www/html/wordpress  
    DirectoryIndex index.php
    <Directory /var/www/html/wordpress/backup >
    Options Indexes
       Order allow,deny
    Allow from 192.168.129.150 192.168.129.170 
    </Directory>
    <Directory /var/www/html/wordpress >
    Options -Indexes
    </Directory>
</VirtualHost>

<VirtualHost 192.168.129.146:80>
    SSLEngine on
    SSLCertificateFile /etc/pki/tls/certs/localhost.crt
    SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
    DocumentRoot /var/www/html/wordpress  
    DirectoryIndex index.php
    <Directory /var/www/html/wordpress/backup >
    Options Indexes
       Order allow,deny
    Allow from 192.168.129.150 192.168.129.170 
    </Directory>
    <Directory /var/www/html/wordpress >
    Options -Indexes
    </Directory>
</VirtualHost>

```
2. Restart Apache.
```apache
systemctl restart httpd.service
```

---

### Deny Selected IP Addresses
1. Edit Apache configuration.
```apache
nano /etc/httpd/conf/httpd.conf
```
Add Data.
```apache

       Order allow,deny
    Allow from all
    Deny from 192.168.129.151 
```

Main File Configuration.
```apache
<VirtualHost 192.168.129.146:443>
    SSLEngine on
    SSLCertificateFile /etc/pki/tls/certs/localhost.crt
    SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
    DocumentRoot /var/www/html/wordpress  
    DirectoryIndex index.php
    <Directory /var/www/html/wordpress/backup >
    Options Indexes
       Order allow,deny
    Allow from 192.168.129.150 192.168.129.170 
    </Directory>
    <Directory /var/www/html/wordpress >
    Options -Indexes
    </Directory>
    <Directory /var/www/html/wordpress >
    Options -Indexes
    </Directory>
</VirtualHost>

<VirtualHost 192.168.129.146:80>
    SSLEngine on
    SSLCertificateFile /etc/pki/tls/certs/localhost.crt
    SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
    DocumentRoot /var/www/html/wordpress  
    DirectoryIndex index.php
    <Directory /var/www/html/wordpress/backup >
    Options Indexes
       Order allow,deny
    Allow from 192.168.129.150 192.168.129.170 
    </Directory>
    <Directory /var/www/html/wordpress >
    Options -Indexes
    </Directory>
</VirtualHost>

```
2. Restart Apache.
```apache
systemctl restart httpd.service
```
---

### Secure Directory Hosting with User Authentication
### Using .htaccess
1. Edit the *.htaccess* file:
```apache
nano /var/www/html/wordpress/backup/.htaccess
```
```apache
AuthNaæ 'Nikhil Patidar'
AuthType basic
AJthUserFi1e /etc/httpd/htpasswd
Require valid-user
```
2. Create a password file and add users.
```apache
htpasswd -c /etc/httpd/htpasswd user1

```
```apache

htpasswd -c /etc/httpd/htpasswd user2
```
```apache
cat /etc/httpd/htpasswd
```
```apache
userl:$apr1$eSizqEpL$hjNvt1TCuyGIKcRS21Sdt1
user2:$apr1$U1mefV$G7c78n4F20H6gQeTEV7bF/
```
3. edit the Apache Configuration.
```apache
nano /etc/httpd/conf/httpd.conf
```
Add Data.
```apache
    AllowOverride Authconfig
```

Main File Configuration.
```apache
<VirtualHost 192.168.129.146:443>
    SSLEngine on
    SSLCertificateFile /etc/pki/tls/certs/localhost.crt
    SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
    DocumentRoot /var/www/html/wordpress  
    DirectoryIndex index.php
    <Directory /var/www/html/wordpress/backup >
    Options Indexes
     AllowOverride Authconfig 
    </Directory>
    <Directory /var/www/html/wordpress >
    Options -Indexes
    </Directory>
</VirtualHost>

<VirtualHost 192.168.129.146:80>
    SSLEngine on
    SSLCertificateFile /etc/pki/tls/certs/localhost.crt
    SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
    DocumentRoot /var/www/html/wordpress  
    DirectoryIndex index.php
    <Directory /var/www/html/wordpress/backup >
    Options Indexes
    AllowOverride Authconfig 
    </Directory>
    <Directory /var/www/html/wordpress >
    Options -Indexes
    </Directory>
</VirtualHost>

```

4. Restart Apache.
```apache
systemctl restart httpd.service
```
---

### User Authentication Without .htaccess
### Delete old create .htaccess file
File Location.
```apache
cd /var/www/html/wordpress/backup/.htacces
```
Delete file.
```apache
rm -rf .htacces
```
1. Edit Apache configuration.
```apache
nano /etc/httpd/conf/httpd.conf
```
Add Data.
```apache

        AuthName "Private"
    AuthType Basic
    AuthBasicProvider file
         AuthUserFile /etc/httpd/htpasswd
         Require Valid-user
    Options +Indexes
       
```

Main File Configuration.
```apache
<VirtualHost 192.168.129.146:443>
    SSLEngine on
    SSLCertificateFile /etc/pki/tls/certs/localhost.crt
    SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
    DocumentRoot /var/www/html/wordpress  
    DirectoryIndex index.php
    <Directory /var/www/html/wordpress/backup >
        AuthName "Private"
    AuthType Basic
    AuthBasicProvider file
         AuthUserFile /etc/httpd/htpasswd
         Require Valid-user
    Options +Indexes
    </Directory>
    <Directory /var/www/html/wordpress >
    Options -Indexes
    </Directory>
</VirtualHost>

<VirtualHost 192.168.129.146:80>
    SSLEngine on
    SSLCertificateFile /etc/pki/tls/certs/localhost.crt
    SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
    DocumentRoot /var/www/html/wordpress  
    DirectoryIndex index.php
    <Directory /var/www/html/wordpress/backup >
            AuthName "Private"
    AuthType Basic
    AuthBasicProvider file
         AuthUserFile /etc/httpd/htpasswd
         Require Valid-user
    Options +Indexes 
    </Directory>
    <Directory /var/www/html/wordpress >
    Options -Indexes
    </Directory>
</VirtualHost>

```
2. Restart Apache.
```apache
systemctl restart httpd.service
```
---




## **What is Directory Listing on a Website?**  
Directory Listing on a website occurs when a web server **does not have an index file** (such as `index.html` or `index.php`) in a directory, allowing users to view all files and folders in that directory. This can unintentionally expose **sensitive information** to attackers.  

---

## **How Does Directory Listing Work?**  
When a user visits a website URL like:  
```
https://example.com/uploads/
```
- If an `index.html` or `index.php` file is present → The webpage loads normally.  
- If no index file exists → The web server **displays a list** of all files and directories instead.  

### **Example of Directory Listing Page**
```
Index of /uploads
--------------------------------
Parent Directory       02-Apr-2025  10:30 -
image1.jpg            02-Apr-2025  10:30  123KB
database_backup.sql   02-Apr-2025  10:30  2.5MB
.htaccess             02-Apr-2025  10:30  1KB
--------------------------------
```
This means an attacker can **directly access and download files**, which can be a major security risk.

---

# Directory Listing Guide

## Change Directory and Create an Empty File
```bash
cd /var/www/html/wordpress/wp-content/uploads/2024/03
```
Create Empty file index.php
```bash
touch index.php
```

## View the Directory using the Browser  
Type Search Box:
```bash
https://192.168.112.146/wp-content/uploads/
```

---

## Disable Directory Listing for All Directories in Apache

### 1. Edit the Apache site configuration file:
```bash
nano /etc/apache2/sites-available/wordpress.conf
```

### Configuration: `wordpress.conf`
```apache
<VirtualHost 192.168.112.146:443>
    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/ssl-cert-snakeoil.pem
    SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key
    ServerName nikhil.local
    DocumentRoot /var/www/html/wordpress
    DirectoryIndex index.php
    ServerAlias www.nikhil.local
</VirtualHost>

<VirtualHost 192.168.112.146:80>
    ServerName nikhil.local
    DocumentRoot /var/www/html/wordpress
    DirectoryIndex index.php
    ServerAlias www.nikhil.local
    <Directory /var/www/html/wordpress>
        Options -Indexes
    </Directory>
</VirtualHost>
```

### 2. Enable the site configuration and required modules:
```bash
a2ensite wordpress.conf
a2enmod ssl
```

---

## 3. Restart the Apache service:
```bash
systemctl restart apache2.service
```

---

## 4. Edit a specific site-level configuration file if needed:
```bash
nano /etc/apache2/sites-available/wp-site.conf
```

### Configuration: `wp-site.conf`
```apache
<VirtualHost 192.168.112.146:80>
    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/ssl-cert-snakeoil.pem
    SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key
    ServerName nikhil.local
    DocumentRoot /var/www/html/wordpress
    DirectoryIndex index.php
    ServerAlias www.nikhil.local
    <Directory /var/www/html/wordpress>
        Options -Indexes
    </Directory>
</VirtualHost>
```

---

## Delete Directory 
```bash
cd /var/www/html/wordpress/wp-content/uploads/2024/03
```
Delete file index.php
```bash
rm -rf index.php
```

---

### 5. Restart Apache again:
```bash
systemctl restart apache2.service
```

---

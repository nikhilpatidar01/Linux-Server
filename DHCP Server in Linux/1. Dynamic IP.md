
### **🌐 What is a DHCP Server?**  

A **DHCP (Dynamic Host Configuration Protocol) Server** is a network server that **automatically assigns IP addresses** and other network settings (such as subnet mask, gateway, and DNS) to devices on a network. This eliminates the need for manual IP configuration on client devices.  

---

### **⚙️ How DHCP Works?**  
When a device (client) connects to a network, it follows these steps to obtain an IP address from the **DHCP server**:  

1️⃣ **DHCP Discovery** (`DHCPDISCOVER`) – 📢 The client sends a broadcast request to find a DHCP server.  
2️⃣ **DHCP Offer** (`DHCPOFFER`) – 📩 The DHCP server responds with an available IP address and network settings.  
3️⃣ **DHCP Request** (`DHCPREQUEST`) – 📡 The client requests the offered IP address.  
4️⃣ **DHCP Acknowledgment** (`DHCPACK`) – ✅ The DHCP server confirms the assignment, and the client starts using the IP address.  

---

### **🔑 Key Features of DHCP Server**  
✅ **Automatic IP Assignment** – Reduces manual IP configuration.  
✅ **Prevents IP Conflicts** – Ensures each device gets a unique IP.  
✅ **Centralized Network Management** – Admins can control IP address distribution from a single server.  
✅ **IP Lease Management** – Assigns temporary IPs, reclaiming unused ones.  
✅ **Supports Reserved (Static) IPs** – Assigns permanent IPs to specific devices based on their MAC address.  

---

### **📍 Where is DHCP Used?**  
🏠 **Home Networks** – Routers use DHCP to assign IPs to connected devices.  
🏢 **Enterprise Networks** – Manages thousands of devices efficiently.  
🌍 **ISP Networks** – Assigns public IPs dynamically to customer devices.  

---

# **🛠 DHCP Server Configuration Guide**  
This document provides a step-by-step guide to install, configure, and manage a DHCP server on a **Linux (CentOS)** system.  

---

## **1️⃣ Check Available Repositories**  
📋 List all available repositories to ensure that the DHCP server package is available:  
```bash
yum repolist all
```

---

## **2️⃣ Verify if DHCP Package is Installed**  
🔍 Check if the DHCP package is already installed:  
```bash
rpm -qa | grep dhcp
```

---

## **3️⃣ Install DHCP Server**  
📥 Install the DHCP server package:  
```bash
yum install dhcp-server -y
```

---

## **4️⃣ Verify Installation**  
🔎 Check if the DHCP package and DHCP server are installed:  
```bash
rpm -qa | grep dhcp
rpm -qa | grep dhcp-server
```

---

## **5️⃣ Get Detailed Information About DHCP Server**  
📖 Display detailed information about the installed DHCP server package:  
```bash
rpm -qi dhcp-server
```

---

## **6️⃣ List Documentation Files for DHCP Server**  
📜 List the documentation files included with the DHCP server:  
```bash
rpm -qd dhcp-server
```

---

## **7️⃣ List Configuration Files for DHCP Server**  
⚙️ List the configuration files included with the DHCP server:  
```bash
rpm -qc dhcp-server
```

---

## **8️⃣ List All Files Installed by DHCP Server**  
📂 List all files installed by the DHCP server package:  
```bash
rpm -ql dhcp-server
```

---

## **9️⃣ Edit DHCP Configuration File**  
✏️ Open the DHCP configuration file for editing:  
```bash
vim /etc/dhcp/dhcpd.conf
```

---

## **🔟 Reference Example Configuration**  
📑 Open the example configuration file for reference:  
```bash
vim /usr/share/doc/dhcp-server/dhcpd.conf.example
```

---

## **⚡ Start and Manage DHCP Service**  

🔍 **Check Service Status**  
```bash
systemctl status dhcpd.service
```

▶️ **Start DHCP Service**  
```bash
systemctl start dhcpd.service
```

🔄 **Restart DHCP Service**  
```bash
systemctl restart dhcpd.service
```

🚀 **Enable Service to Start at Boot**  
```bash
systemctl enable dhcpd.service
```

---

## **🛑 Check Open Ports**  

📡 **Check Open Ports and Listening Services**  
```bash
netstat -nltup
```

🔎 **Check if DHCP Ports Are Open**  
```bash
netstat -nltup | grep dhcp
```

---

## **🛡️ Update Firewall Rules (Firewalld)**  

🚪 **Open DHCP Port in Firewall**  
Allow DHCP traffic through the firewall:  
```bash
firewall-cmd --permanent --add-port=67/udp
```

🔄 **Reload Firewall to Apply Changes**  
```bash
firewall-cmd --reload
```

🔍 **Verify Firewall Rules**  
Check if the DHCP port is open:  
```bash
firewall-cmd --list-ports
```

Alternatively, check detailed firewall configuration:  
```bash
firewall-cmd --list-all
```

---

## **📑 Check DHCP Leases**  
🔍 Display current DHCP leases:  
```bash
cat /var/lib/dhcpd/dhcpd.leases
```

---

## **📄 Sample DHCP Configuration**  
📝 Below is an example of a basic **dhcpd.conf** configuration file:  

```bash
# DHCP Server Configuration File
# See /usr/share/doc/dhcp-server/dhcpd.conf.example
# See dhcpd.conf(5) man page for details

authoritative;

# Specify network address and subnet mask
subnet 192.168.1.0 netmask 255.255.255.0 {
    
    # Specify the range of lease IP addresses
    range 192.168.1.50 192.168.1.250;
    
    # Specify default gateway
    option routers 192.168.1.1;
    
    # DNS servers for name resolution
    option domain-name-servers 8.8.8.8, 8.8.4.4;
    
    # Specify broadcast address
    option broadcast-address 192.168.1.255;
    
    # Default lease time (in seconds)
    default-lease-time 600;
    
    # Max lease time (in seconds)
    max-lease-time 7200;
}
```

---

# ğŸ” **Linux `sudo` Command and `sudoers` File Configuration**  

The **`sudo` (Superuser Do)** command allows authorized users to execute commands with **root privileges** or another userâ€™s permissions, as defined in the **`/etc/sudoers`** file.

---

# ğŸ“Œ **1. `sudo` Command â€“ Run Commands with Elevated Privileges**  

### âœ… **Basic Usage â€“ Run a Command as Root**
```bash
sudo ls /root
```
ğŸ”¹ Runs `ls /root` with **root privileges**.  
ğŸ”¹ **You will be prompted for your password**.

---

### âœ… **1.1 Run a Command as Another User (`-u`)**
```bash
sudo -u nikhil whoami
```
### âœ… **Output**
```
nikhil
```
ğŸ”¹ Runs `whoami` as **user `nikhil`**.

---

### âœ… **1.2 Execute Multiple Commands (`&&`)**
```bash
sudo bash -c "whoami && id"
```
### âœ… **Output**
```
root
uid=0(root) gid=0(root) groups=0(root)
```
ğŸ”¹ Runs **multiple commands as root**.

---

### âœ… **1.3 Open a Root Shell (`sudo -s`)**
```bash
sudo -s
whoami
```
### âœ… **Output**
```
root
```
ğŸ”¹ Opens a **root shell**.

---

### âœ… **1.4 Switch to a Root Login Shell (`sudo -i`)**
```bash
sudo -i
```
ğŸ”¹ Logs in as **root**, **loading root's environment**.

---

### âœ… **1.5 Run a Command Without Saving It in History**
```bash
sudo visudo
```
ğŸ”¹ Runs `visudo` **without saving it in shell history**.

---

# ğŸ“Œ **2. `sudoers` File â€“ Configuring User Privileges**  

To configure **who can use `sudo` and for which commands**, edit the **`/etc/sudoers`** file **using `visudo`**:  

```bash
sudo visudo
```
ğŸ”¹ `visudo` prevents syntax errors that could **lock you out**.

---

## âœ… **2.1 Grant Full Root Privileges to a User**
```bash
nikhil ALL=(ALL:ALL) ALL
```
ğŸ”¹ `nikhil` can **run any command** as **any user or group**.

---

## âœ… **2.2 Allow a User to Run Specific Commands**
```bash
jaydeep ALL=(ALL) /usr/sbin/apt update, /usr/bin/systemctl restart apache2
```
ğŸ”¹ `jaydeep` can only run **package updates** and **restart Apache**.

---

## âœ… **2.3 Allow a User to Run Commands Without a Password (`NOPASSWD`)**
```bash
jaydeep ALL=(ALL) NOPASSWD: /usr/bin/systemctl restart apache2
```
ğŸ”¹ `jaydeep` can restart Apache **without a password**.

---

## âœ… **2.4 Restrict a User to Specific Commands**
```bash
nikhil ALL=(ALL) /usr/bin/ls, /usr/bin/cat
```
ğŸ”¹ `nikhil` can **only run `ls` and `cat`** with `sudo`.

---

## âœ… **2.5 Grant a Group (`%groupname`) Specific Permissions**
```bash
%developers ALL=(ALL) NOPASSWD: /usr/bin/mkdir, PASSWD: /usr/bin/rm
```
ğŸ”¹ The **`developers` group** can **create directories without a password** but **must enter a password to delete files**.

---

## âœ… **2.6 Allow a Web Server User (`www-data`) to Restart Apache**
```bash
%www-data ALL=(ALL:ALL) NOPASSWD: /usr/bin/systemctl restart apache2
```
ğŸ”¹ **Web server processes** can restart Apache **without a password**.

---

## âœ… **2.7 Creating Command Aliases for Easier Management**
```bash
Cmnd_Alias WEB_CMDS = /usr/bin/systemctl restart apache2, /usr/bin/systemctl reload nginx
```
```bash
jaydeep ALL=(ALL) NOPASSWD: WEB_CMDS
```
ğŸ”¹ Defines a **command alias (`WEB_CMDS`)** and assigns it to `jaydeep`.

---

# ğŸ“Š **Summary of `sudoers` Rules**  

| **Rule** | **Description** |
|------------|----------------|
| `nikhil ALL=(ALL:ALL) ALL` | `nikhil` can run **all commands** as **any user** |
| `jaydeep ALL=(ALL) /usr/bin/systemctl restart apache2` | `jaydeep` can **only restart Apache** |
| `jaydeep ALL=(ALL) NOPASSWD: /usr/bin/systemctl restart apache2` | `jaydeep` can restart Apache **without a password** |
| `%developers ALL=(ALL) NOPASSWD: /usr/bin/mkdir, PASSWD: /usr/bin/rm` | **Developers can create directories** without a password but **must enter a password to delete files** |
| `%www-data ALL=(ALL:ALL) NOPASSWD: /usr/bin/systemctl restart apache2` | `www-data` can restart Apache **without a password** |
| `Cmnd_Alias WEB_CMDS = /usr/bin/systemctl restart apache2, /usr/bin/systemctl reload nginx` | Defines **a command alias (`WEB_CMDS`)** for web services |

---
